!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/dist/",n(n.s=3)}([function(t,e,n){"use strict";var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(i=window)}t.exports=i},function(t,e,n){"use strict";t.exports={isFunction:function(t){return"function"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},each:function(t,e){for(var n=0,i=t.length;n<i&&!1!==e(t[n],n);n++);}}},function(t,e,n){"use strict";function i(t,e){this.radius=e,this.height=Math.sqrt(3)*e,this.width=2*e,this.side=1.5*e,this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.canvasOriginX=0,this.canvasOriginY=0}i.prototype.drawHexGrid=function(t,e,n,i,o){var r,a;this.canvasOriginX=n,this.canvasOriginY=i;for(var s="",c=!1,u=0;u<e;u++){for(var l=0;l<t;l++)c?(r=u*this.side+n,a=l*this.height+i+.5*this.height):(r=u*this.side+n,a=l*this.height+i),o&&(s=u+","+l),this.drawHex(r-20,a-28,"rgba(0,0,0,0.1)",s);c=!c}},i.prototype.drawHexAtColRow=function(t,e,n){var i=t%2==0?e*this.height+this.canvasOriginY:e*this.height+this.canvasOriginY+this.height/2,o=t*this.side+this.canvasOriginX;this.drawHex(o-20,i-28,n,"")},i.prototype.getPXAtColRow=function(t,e){var n=t%2==0?e*this.height+this.canvasOriginY:e*this.height+this.canvasOriginY+this.height/2;return{x:t*this.side+this.canvasOriginX-20,y:n-28}},i.prototype.drawHex=function(t,e,n,i){this.context.strokeStyle="rgba(0,0,0,0.4)",this.context.beginPath(),this.context.moveTo(t+this.width-this.side,e),this.context.lineTo(t+this.side,e),this.context.lineTo(t+this.width,e+this.height/2),this.context.lineTo(t+this.side,e+this.height),this.context.lineTo(t+this.width-this.side,e+this.height),this.context.lineTo(t,e+this.height/2),n&&(this.context.fillStyle=n,this.context.fill()),this.context.closePath(),this.context.stroke(),i&&(this.context.font="8px",this.context.fillStyle="rgba(0,255,0,0.4)",this.context.fillText(i,t+this.width/2-this.width/4,e+(this.height-5)))},i.prototype.getRelativeCanvasOffset=function(){var t=0,e=0,n=this.canvas;if(n.offsetParent){do{t+=n.offsetLeft,e+=n.offsetTop}while(n=n.offsetParent);return{x:t,y:e}}},i.prototype.getSelectedTile=function(t,e){var n=this.getRelativeCanvasOffset();t-=n.x-20,e-=n.y-28;var i=Math.floor(t/this.side),o=Math.floor(i%2==0?Math.floor(e/this.height):Math.floor((e+.5*this.height)/this.height)-1);if(t>i*this.side&&t<i*this.side+this.width-this.side){var r=new Object;r.x=i*this.side,r.y=i%2==0?o*this.height:o*this.height+this.height/2;var a=new Object;a.x=r.x,a.y=r.y+this.height/2;var s=new Object;s.x=r.x+this.width-this.side,s.y=r.y;var c=new Object;c.x=t,c.y=e,this.isPointInTriangle(c,r,a,s)&&--i%2!=0&&o--;var u=new Object;u=a;var l=new Object;l.x=u.x,l.y=u.y+this.height/2;var p=new Object;p.x=l.x+(this.width-this.side),p.y=l.y,this.isPointInTriangle(c,u,l,p)&&--i%2==0&&o++}return{row:o,column:i}},i.prototype.sign=function(t,e,n){return(t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y)},i.prototype.isPointInTriangle=function(t,e,n,i){var o,r,a;return o=this.sign(t,e,n)<0,r=this.sign(t,n,i)<0,a=this.sign(t,i,e)<0,o==r&&r==a},e.HexagonGrid=i},function(t,e,n){"use strict";(function(t){n(4),n(12),n(14);var e=n(21);t.project={canvas:e.canvas,init:{instantly:function(){},whenMarkupParsed:function(){var e=t.project;e.globalevents(),e.canvas.init()}},globalevents:function(){}},function(t){t.init.instantly(),"loading"!==document.readyState?t.init.whenMarkupParsed():document.addEventListener("DOMContentLoaded",function(){t.init.whenMarkupParsed()})}(t.project)}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(5);i(n(7));var e=i(n(8));function i(t){return t&&t.__esModule?t:{default:t}}t.enquire=e.default}).call(this,n(0))},function(t,e,n){"use strict";n(6).polyfill()},function(t,e,n){"use strict";function i(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(void 0!==o&&null!==o)for(var r=Object.keys(Object(o)),a=0,s=r.length;a<s;a++){var c=r[a],u=Object.getOwnPropertyDescriptor(o,c);void 0!==u&&u.enumerable&&(n[c]=o[c])}}return n}t.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n+=1){var o=i[n];t.call(e,o[1],o[0])}},Object.defineProperties(e.prototype,n),e}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),r="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},a=2,s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,o=0;function s(){n&&(n=!1,t()),i&&u()}function c(){r(s)}function u(){var t=Date.now();if(n){if(t-o<a)return;i=!0}else n=!0,i=!1,setTimeout(c,e);o=t}return u}(this.refresh.bind(this),20)};u.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},u.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},u.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),s.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null;var l=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n+=1){var o=i[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},p=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},h=v(0,0,0,0);function d(t){return parseFloat(t)||0}function m(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e.reduce(function(e,n){return e+d(t["border-"+n+"-width"])},0)}function f(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return h;var i=p(t).getComputedStyle(t),o=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n+=1){var o=i[n],r=t["padding-"+o];e[o]=d(r)}return e}(i),r=o.left+o.right,a=o.top+o.bottom,s=d(i.width),c=d(i.height);if("border-box"===i.boxSizing&&(Math.round(s+r)!==e&&(s-=m(i,"left","right")+r),Math.round(c+a)!==n&&(c-=m(i,"top","bottom")+a)),!function(t){return t===p(t).document.documentElement}(t)){var u=Math.round(s+r)-e,l=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return v(o.left,o.top,s,c)}var g="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof p(t).SVGGraphicsElement}:function(t){return t instanceof p(t).SVGElement&&"function"==typeof t.getBBox};function y(t){return i?g(t)?function(t){var e=t.getBBox();return v(0,0,e.width,e.height)}(t):f(t):h}function v(t,e,n,i){return{x:t,y:e,width:n,height:i}}var x=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=t};x.prototype.isActive=function(){var t=y(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var b=function(t,e){var n=function(t){var e=t.x,n=t.y,i=t.width,o=t.height,r="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(r.prototype);return l(a,{x:e,y:n,width:i,height:o,top:n,right:e+i,bottom:o+n,left:e}),a}(e);l(this,{target:t,contentRect:n})},w=function(t,e,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i};w.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new x(t)),this.controller_.addObserver(this),this.controller_.refresh())}},w.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},w.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},w.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},w.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new b(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},w.prototype.clearActive=function(){this.activeObservations_.splice(0)},w.prototype.hasActive=function(){return this.activeObservations_.length>0};var P="undefined"!=typeof WeakMap?new WeakMap:new n,_=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),i=new w(e,n,this);P.set(this,i)};["observe","unobserve","disconnect"].forEach(function(t){_.prototype[t]=function(){return(e=P.get(this))[t].apply(e,arguments);var e}});var C=void 0!==o.ResizeObserver?o.ResizeObserver:_;e.default=C}).call(this,n(0))},function(t,e,n){"use strict";var i=n(9);t.exports=new i},function(t,e,n){"use strict";var i=n(10),o=n(1),r=o.each,a=o.isFunction,s=o.isArray;function c(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}c.prototype={constructor:c,register:function(t,e,n){var o=this.queries,c=n&&this.browserIsIncapable;return o[t]||(o[t]=new i(t,c)),a(e)&&(e={match:e}),s(e)||(e=[e]),r(e,function(e){a(e)&&(e={match:e}),o[t].addHandler(e)}),this},unregister:function(t,e){var n=this.queries[t];return n&&(e?n.removeHandler(e):(n.clear(),delete this.queries[t])),this}},t.exports=c},function(t,e,n){"use strict";var i=n(11),o=n(1).each;function r(t,e){this.query=t,this.isUnconditional=e,this.handlers=[],this.mql=window.matchMedia(t);var n=this;this.listener=function(t){n.mql=t.currentTarget||t,n.assess()},this.mql.addListener(this.listener)}r.prototype={constuctor:r,addHandler:function(t){var e=new i(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var e=this.handlers;o(e,function(n,i){if(n.equals(t))return n.destroy(),!e.splice(i,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){o(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";o(this.handlers,function(e){e[t]()})}},t.exports=r},function(t,e,n){"use strict";function i(t){this.options=t,!t.deferSetup&&this.setup()}i.prototype={constructor:i,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},t.exports=i},function(t,e,n){},,function(t,e,n){"use strict";var i=n(15),r=n(16),a=n(17),s=n(18),c=n(19),u=n(20);window.o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"#"===t.substr(0,1)?document.getElementById(t.substr(1,t.length)):document["querySelector"+(e?"":"All")](t)},window.o._debounce=i.debounce,window.o._isElementInViewport=a.isElementInViewport,window.o._isElementXPercentInViewport=s.isElementXPercentInViewport,window.o._throttle=c.throttle,window.o._debug=u.debug,Object.defineProperty(o,"_hasTouch",{get:r.hasTouch})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.debounce=function(t,e,n){var i;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(o,r)},e),a&&t.apply(o,r)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.hasTouch=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isElementInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isElementXPercentInViewport=function(t,e){var n=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight;return!(Math.floor(100-(n.top>=0?0:n.top)/(+-n.height/1)*100)<e||Math.floor(100-(n.bottom-i)/n.height*100)<e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.throttle=function(t,e,n){var i,o,r,a=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:Date.now(),a=null,r=t.apply(i,o),a||(i=o=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var l=e-(u-s);return i=this,o=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=u,r=t.apply(i,o),a||(i=o=null)):a||!1===n.trailing||(a=setTimeout(c,l)),r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.debug=function(){[].forEach.call(document.querySelectorAll("*"),function(t){t.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16)})}},function(t,e,n){"use strict";n(22);var i=n(2),r=n(23),a=n(24),s=n(25),c=n(26),u=n(27),l=n(28),p=n(29),h=n(30),d=n(31),m=n(32),f=n(33),g=n(34),y=n(35),v=n(36),x=n(37),b=n(38),w=n(39),P=n(40),_=n(41),C=n(42),O=n(43),E=n(44),A=n(45),X=n(46),S=n(47),T=n(48),D=n(49),R=n(50),I=n(51),N=n(52),H=n(53),q=n(54),M=n(55),k=n(56),F=n(57),Y=n(58),j=n(59),B=n(60),L=n(61),G=n(62),z=n(63),V={imports:function(){this.weapons=r.weaponsJSON,this.animations=(0,a.animations)(V),this.cords.getCords=(0,s.getCords)(V),this.cords.getNextCord=c.getNextCord,this.cords.typeOfCord=u.typeOfCord,this.cords.getEnemyByCords=l.getEnemyByCords,this.math.getRandomNumberInRange=p.getRandomNumberInRange,this.math.generateUniqueID=h.generateUniqueID,this.paths.calculatePathDirection=d.calculatePathDirection,this.paths.getStraightPathBetweenCords=m.getStraightPathBetweenCords,this.restricted.isCordRestricted=f.isCordRestricted,V.restricted.isCordSameAsNow=g.isCordSameAsNow,this.paint.combatStatus=y.combatStatus,this.paint.img=(0,v.imagesCollection)(V),this.paint.bar=x.bar,this.paint.grid=b.grid,this.paint.mouseCursor=w.mouseCursor,this.paint.restrictedAreas=P.restrictedAreas,this.paint.background=_.background,V.paint.mousePointerHover=C.mousePointerHover,this.paint.playerBox=O.playerBox,this.paint.playerStillFacing=E.playerStillFacing,this.paint.playerMoving=A.playerMoving,this.paint.playerAttacking=X.playerAttacking,this.paint.enemyBox=S.enemyBox,this.paint.enemyStillFacing=T.enemyStillFacing,this.paint.enemyMoving=D.enemyMoving,this.paint.enemyAttacking=R.enemyAttacking,this.paint.enemyHit=I.enemyHit,this.paint.enemyDeath=N.enemyDeath,this.paint.clearScreen=H.clearScreen,this.paint.updateCanvas=q.updateCanvas,this.update.areaViewportPosition=M.areaViewportPosition,this.update.mousePointerPosition=k.mousePointerPosition,this.update.clickPosition=F.clickPosition,this.update.playerBoxPosition=Y.playerBoxPosition,this.update.playerFacing=j.playerFacing,this.update.enemyFacing=L.enemyFacing,this.update.enemyBoxPosition=B.enemyBoxPosition,this.utils.fixCanvasSize=G.fixCanvasSize,this.utils.createRandomRestrictedArea=z.createRandomRestrictedArea},CONSTANTS:{positionsXsmallTotal:28,positionsYsmallTotal:17,longestPath:28,area:{widthPX:700,heightPX:425,x:null,y:null},mouseBox:{width:25,height:25,halfWidth:12.5,halfHeight:12.5},cordPrioritiesList:["+-","++","/+","-+","--","/-"]},elem:{area:o("#canvas",1)},hexCords:{},math:{},canvas:document.getElementById("canvas").getContext("2d"),canvasBar:document.getElementById("canvasBar").getContext("2d"),weapons:{},enemies:{enemyIdToIndex:function(t){var e=-1;return V.enemies.list.filter(function(n,i){if(n.id===t)return e=i,n}),e},createEnemy:function(t,e){var n={HEX:{CORD:{x:t,y:e}},FACING:{x:"+",y:"+"},DEFAULTS:{actionPoints:4},animation:{},id:V.math.generateUniqueID(V),alive:!0,health:30,engaged:!1,maxsteps:10,aggroRange:5,actionPoints:8,weapon:{},state:0,temp:{tempStep:0,haveBeenRun:!1},animations:{still:{},moving:{},attack:{},hit:{},death:{},dead:{}}};Object.assign(n.weapon,V.weapons.melee),Object.assign(n.animation,{startTime:null,assignAnimationToEnemy:function(){Object.assign(n.animations.still,V.animations.enemy.scorpionStill),n.animations.still.init(),Object.assign(n.animations.moving,V.animations.enemy.scorpionMoving),n.animations.moving.init(),Object.assign(n.animations.attack,V.animations.enemy.scorpionAttack),n.animations.attack.init(),Object.assign(n.animations.hit,V.animations.enemy.scorpionHit),n.animations.hit.init(),Object.assign(n.animations.death,V.animations.enemy.scorpionDeath),n.animations.death.init(),Object.assign(n.animations.dead,V.animations.enemy.scorpionDead),n.animations.dead.init()},init:function(t){n.temp.haveBeenRun=!1,n.temp.tempStep=0,n.animation.startTime=Date.now(),n.state=t},finished:function(){n.state=0},movementAnimation:{start:function(){n.animation.init(1)},stop:function(){n.animation.finished()}},attackAnimation:{start:function(){n.animation.init(2)},stop:function(){n.animation.finished()}},hitAnimation:{start:function(){n.animation.init(3)},stop:function(){n.animation.finished()}},deathAnimation:{start:function(){n.animation.init(-1)},stop:function(){n.animation.finished()}}}),n.animation.assignAnimationToEnemy(),V.enemies.list.push(n)},list:[]},hexagon:{grid:new i.HexagonGrid("canvas",20)},combat:{inCombat:!1,queuePos:0,queue:[],setNextInQueue:function(){var t=V.combat.queuePos,e=t,n=-1;for(++t>V.combat.queue.length-1&&(t=0),e=t;V.combat.queue[e].hasOwnProperty("engaged")?V.combat.queue[e].engaged&&V.combat.queue[e].alive&&(n=e):n=e,++e>V.combat.queue.length-1&&(e=0),e!==V.combat.queuePos;);V.combat.queuePos=n,console.log(V.combat.queuePos)},resetActionPoints:function(t){t?V.player.actionPoints=V.player.DEFAULTS.actionPoints:V.combat.queue[V.combat.queuePos].actionPoints=V.combat.queue[V.combat.queuePos].DEFAULTS.actionPoints},nextEnemyAction:function(t){if(console.log("--NEXT ENEMY ACTION--"),V.player.stopActions=!0,0===t.actionPoints)return console.log("enemy is out of actionPoints, move to next in queue"),void V.combat.moveToNextInQueue();var e=V.paths.getStraightPathBetweenCords(V,t.HEX.CORD,project.canvas.positions.playerPos.HEX.CORD),n=function(){console.log("move towards player"),V.movement.moveEnemyFromStartToEnd(t,t.HEX.CORD,project.canvas.positions.playerPos.HEX.CORD)};t.weapon.range>=e.pathLength?t.actionPoints>=t.weapon.actionPoints?(console.log("attack player!"),V.combat.attackPlayer(t)):e.pathLength>1?n():V.combat.moveToNextInQueue():n()},moveToNextInQueue:function(){var t;return V.combat.setNextInQueue(),console.log("-------MOVE TO NEXT IN QUEUE"),-1===V.combat.queuePos?(V.combat.leaveCombat(),void console.log("--END OF COMBAT--")):"_player"===(t=V.combat.queue[V.combat.queuePos]).id?(V.player.stopActions=!1,V.combat.resetActionPoints(!0),void console.log("--PLAYERS TURN--")):(V.combat.resetActionPoints(!1),void V.combat.nextEnemyAction(t))},subtractActionPoints:function(t,e,n){t&&(n=V.player),n.actionPoints-=e,n.actionPoints<0&&(n.actionPoints=0)},enterCombat:function(){console.log("enter combat scenario"),V.combat.inCombat=!0,V.combat.resetActionPoints(!0),V.combat.clearQueue(),V.combat.populateQueue()},clearQueue:function(){V.combat.queuePos=0,V.combat.queue.length=0},populateQueue:function(){V.combat.queue.push({id:"_player"}),V.enemies.list.filter(function(t,e){t.engaged&&V.combat.queue.push(V.enemies.list[e])})},addToQueue:function(t){void 0===V.combat.queue.find(function(e){return e.id===t.id})&&V.combat.queue.push(t)},leaveCombat:function(){V.player.stopActions=!1,V.combat.inCombat=!1,V.combat.resetActionPoints(!0),console.log("--leaving combat--")},attackPlayer:function(t){var e;if(V.update.enemyFacing(V,t.idx,V.paths.calculatePathDirection(V,t.HEX.CORD,V.positions.playerPos.HEX.CORD)),t.actionPoints<t.weapon.actionPoints)return console.log("too few actionPoints, stop the attack"),void V.combat.nextEnemyAction(t);V.combat.subtractActionPoints(!1,t.weapon.actionPoints,t),e=V.math.getRandomNumberInRange(V,t.weapon.damage[0],t.weapon.damage[1]);t.animation.attackAnimation.start();var n=0,i=setInterval(function(){4===++n?console.log("on hit action"):11===n&&(clearInterval(i),t.animation.attackAnimation.stop(),V.player.health-=e,V.player.health<=0?console.log("GAME OVER, youre dead"):V.combat.nextEnemyAction(t))},100)},attackEnemy:function(t){var e,n=V.enemies.list[t];if(V.update.playerFacing(V,V.paths.calculatePathDirection(V,V.positions.playerPos.HEX.CORD,n.HEX.CORD)),!(V.player.actionPoints<V.player.weapon.actionPoints)){V.combat.subtractActionPoints(!0,V.player.weapon.actionPoints,V.player),V.player.stopActions=!0,e=V.math.getRandomNumberInRange(V,V.player.weapon.damage[0],V.player.weapon.damage[1]);V.player.animation.attackAnimation.start();var i=0,o=setInterval(function(){4===++i&&(console.log("on hit action"),n.animation.hitAnimation.start(),setTimeout(function(){n.animation.hitAnimation.stop(),clearInterval(o),V.player.animation.attackAnimation.stop(),n.health-=e,n.health<=0&&(n.alive=!1,n.engaged=!1,n.animation.deathAnimation.start(),setTimeout(function(){n.animation.deathAnimation.stop()},800)),V.player.stopActions=!1,0===V.player.actionPoints&&V.combat.moveToNextInQueue()},800))},100)}},tryCombat:function(t,e){var n=V.cords.getEnemyByCords(V,e);if(V.paths.getStraightPathBetweenCords(V,t,e).pathLength<=V.player.weapon.range)console.log("TIHS ENEMY ENGAGED: ",n),V.enemies.list[n.idx].engaged=!0,V.combat.addToQueue(n),V.combat.inCombat||V.combat.enterCombat(),V.combat.attackEnemy(n.idx);else{console.log("the enemy is not within range");var i=V.paths.calculatePathDirection(V,n.HEX.CORD,V.positions.playerPos.HEX.CORD);V.update.enemyFacing(V,n.idx,i)}}},animations:{},player:{DEFAULTS:{actionPoints:8},health:40,state:0,actionPoints:8,stopActions:!1,weapon:{},temp:{attackStep:0,haveBeenRun:!1},animations:{still:{},moving:{},attack:{}},animation:{startTime:null,assignDefaultToPlayer:function(){Object.assign(V.player.animations.still,V.animations.player.stillBasic),V.player.animations.still.init(),Object.assign(V.player.animations.moving,V.animations.player.movingBasic),V.player.animations.moving.init(),Object.assign(V.player.animations.attack,V.animations.player.gunFireBasic),V.player.animations.attack.init()},init:function(t){V.player.temp.haveBeenRun=!1,V.player.temp.attackStep=0,V.player.animation.startTime=Date.now(),V.player.state=t},finished:function(){V.player.state=0},movementAnimation:{start:function(){V.player.animation.init(1)},stop:function(){V.player.animation.finished()}},attackAnimation:{start:function(){V.player.animation.init(2)},stop:function(){V.player.animation.finished()}}}},positions:{mousePointer:{HEX:{PX:{x:0,y:0},CORD:{x:0,y:0}}},clickPos:{HEX:{PX:{x:0,y:0},CORD:{x:0,y:0}}},playerPos:{previousImgStep:0,moveCounter:0,FACING:{x:"+",y:"+"},HEX:{PX:{x:0,y:0},CORD:{x:0,y:0}}}},restricted:{dynamic:!1,dynamicCords:[],cords:[{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:3,y:3},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:3,y:6},{x:2,y:6}]},utils:{},paths:{},update:{},paint:{},cords:{},movement:{movePlayerFromStartToEnd:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(0===V.player.state){V.restricted.dynamic=!0,V.restricted.dynamicCords=V.restricted.cords.slice(0,V.restricted.cords.length);var i=[],o=void 0,r=void 0,a=void 0,s=t,c=void 0;for(o=0;o<n&&(V.restricted.dynamicCords.push(s),c=V.paths.calculatePathDirection(V,s,e),s=(r=V.cords.getNextCord(V,s.x,s.y,c.directionX,c.directionY,!0)).newCords,i.push({nextCords:r.newCords,pathDirection:c}),r.newCords.x!=e.x||r.newCords.y!=e.y);o++);if(V.combat.inCombat){if(0===V.player.actionPoints)return void V.combat.moveToNextInQueue();i=i.slice(0,V.player.actionPoints),V.combat.subtractActionPoints(!0,i.length,V.player)}o=0,V.player.animation.movementAnimation.start(),a=setInterval(function(){V.update.playerBoxPosition(V,i[o].nextCords.x,i[o].nextCords.y),V.update.playerFacing(V,i[o].pathDirection),o===i.length-1&&(clearInterval(a),V.player.animation.movementAnimation.stop(),V.restricted.dynamic=!1,V.combat.inCombat&&0===V.player.actionPoints)?V.combat.moveToNextInQueue():o++},150)}},moveEnemyFromStartToEnd:function(t,e,n){V.restricted.dynamic=!0,V.restricted.dynamicCords=V.restricted.cords.slice(0,V.restricted.cords.length);var i=[],o=void 0,r=void 0,a=void 0,s=e,c=void 0;for(o=0;o<V.enemies.list.length;o++)V.restricted.dynamicCords.push(V.enemies.list[o].HEX.CORD);for(o=0;o<t.maxsteps&&(V.restricted.dynamicCords.push(s),c=V.paths.calculatePathDirection(V,s,n),s=(r=V.cords.getNextCord(V,s.x,s.y,c.directionX,c.directionY,!0)).newCords,i.push({nextCords:r.newCords,pathDirection:c}),r.newCords.x!=n.x||r.newCords.y!=n.y);o++);i[i.length-1].nextCords.x===n.x&&i[i.length-1].nextCords.y===n.y&&i.pop(),i=i.slice(0,t.actionPoints),V.combat.subtractActionPoints(!1,i.length,t),o=0,t.animation.movementAnimation.start(),a=setInterval(function(){V.update.enemyBoxPosition(V,t,i[o].nextCords.x,i[o].nextCords.y),V.update.enemyFacing(V,t.idx,i[o].pathDirection),o===i.length-1&&(clearInterval(a),t.animation.movementAnimation.stop(),V.restricted.dynamic=!1,V.combat.nextEnemyAction(t)),o++},150)}},events:{updateInterface:function(){setInterval(function(){requestAnimationFrame(function(){V.paint.updateCanvas(V,25)})},50)},updateMousePointerPosition:function(){V.elem.area.addEventListener("mousemove",function(t){requestAnimationFrame(function(){V.update.mousePointerPosition(V,t.clientX-V.CONSTANTS.area.x,t.clientY-V.CONSTANTS.area.y)})})},updateMousePointerPositionHEX:function(){V.elem.area.addEventListener("mousemove",function(t){var e=V.hexagon.grid.getSelectedTile(t.pageX-V.hexagon.grid.canvasOriginX,t.pageY-V.hexagon.grid.canvasOriginY);V.positions.mousePointer.HEX.CORD.x=e.column,V.positions.mousePointer.HEX.CORD.y=e.row},!1)},click:function(){V.elem.area.addEventListener("click",function(t){if(!V.player.stopActions){var e,n,i,o,r;e=JSON.parse(JSON.stringify({x:V.positions.clickPos.HEX.CORD.x,y:V.positions.clickPos.HEX.CORD.y})),V.update.clickPosition(V,t,t.clientX-V.CONSTANTS.area.x,t.clientY-V.CONSTANTS.area.y),n=V.restricted.isCordSameAsNow(V,V.positions.clickPos.HEX.CORD,e),o={x:V.positions.playerPos.HEX.CORD.x,y:V.positions.playerPos.HEX.CORD.y},r={x:V.positions.clickPos.HEX.CORD.x,y:V.positions.clickPos.HEX.CORD.y},console.log(o),console.log(r),i=V.cords.typeOfCord(V,V.positions.clickPos.HEX.CORD),console.log(i),0!==i.type||n?1===i.type||(2===i.type?V.combat.tryCombat(o,r):3===i.type&&console.log("dead enemy! loot?")):V.movement.movePlayerFromStartToEnd(o,r)}})},init:function(){V.events.updateInterface(),V.events.updateMousePointerPosition(),V.events.updateMousePointerPositionHEX(),V.events.click()}},init:function(){this.imports(),this.utils.fixCanvasSize(),Object.assign(this.player.weapon,V.weapons.rifle),this.paint.img.barInit(),this.paint.img.bgDesertInit(),this.paint.img.cursorStandardInit(),this.paint.img.cursorCurrentInit(),this.paint.img.cursorEnemyInit(),this.paint.img.cursorRestrictedInit(),this.paint.img.cursorTouchInit(),V.player.animation.assignDefaultToPlayer(),this.enemies.createEnemy(8,6),this.enemies.createEnemy(13,8),this.events.init(),this.update.areaViewportPosition(V)}};t.exports.canvas=V},function(t,e,n){"use strict";function i(t,e){return{x:t,y:e}}function o(t,e,n){if(0!==Math.round(t+e+n))throw"q + r + s must be 0";return{q:t,r:e,s:n}}function r(t,e){return o(t.q+e.q,t.r+e.r,t.s+e.s)}function a(t,e){return o(t.q-e.q,t.r-e.r,t.s-e.s)}function s(t){return o(-t.s,-t.q,-t.r)}function c(t){return o(-t.r,-t.s,-t.q)}var u=[o(1,0,-1),o(1,-1,0),o(0,-1,1),o(-1,0,1),o(-1,1,0),o(0,1,-1)];function l(t){return u[t]}function p(t,e){return r(t,l(e))}var h=[o(2,-1,-1),o(1,-2,1),o(-1,-1,2),o(-2,1,1),o(-1,2,-1),o(1,1,-2)];function d(t,e){return r(t,h[e])}function m(t){return(Math.abs(t.q)+Math.abs(t.r)+Math.abs(t.s))/2}function f(t,e){return m(a(t,e))}function g(t){var e=Math.round(t.q),n=Math.round(t.r),i=Math.round(t.s),r=Math.abs(e-t.q),a=Math.abs(n-t.r),s=Math.abs(i-t.s);return r>a&&r>s?e=-n-i:a>s?n=-e-i:i=-e-n,o(e,n,i)}function y(t,e,n){return o(t.q*(1-n)+e.q*n,t.r*(1-n)+e.r*n,t.s*(1-n)+e.s*n)}function v(t,e){for(var n=f(t,e),i=o(t.q+1e-6,t.r+1e-6,t.s-2e-6),r=o(e.q+1e-6,e.r+1e-6,e.s-2e-6),a=[],s=1/Math.max(n,1),c=0;c<=n;c++)a.push(g(y(i,r,s*c)));return a}function x(t,e){return{col:t,row:e}}var b=1,w=-1;function P(t,e){return x(e.q,e.r+(e.q+t*(1&e.q))/2)}function _(t,e){var n=e.col,i=e.row-(e.col+t*(1&e.col))/2;return o(n,i,-n-i)}function C(t,e){return x(e.q+(e.r+t*(1&e.r))/2,e.r)}function O(t,e){var n=e.col-(e.row+t*(1&e.row))/2,i=e.row;return o(n,i,-n-i)}function E(t,e){return{col:t,row:e}}function A(t){return E(t.q,2*t.r+t.q)}function X(t){var e=t.col,n=(t.row-t.col)/2;return o(e,n,-e-n)}function S(t){return E(2*t.q+t.r,t.r)}function T(t){var e=(t.col-t.row)/2,n=t.row;return o(e,n,-e-n)}function D(t,e,n,i,o,r,a,s,c){return{f0:t,f1:e,f2:n,f3:i,b0:o,b1:r,b2:a,b3:s,start_angle:c}}function R(t,e,n){return{orientation:t,size:e,origin:n}}var I=D(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),N=D(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);function H(t,e){var n=t.orientation,o=t.size,r=t.origin,a=(n.f0*e.q+n.f1*e.r)*o.x,s=(n.f2*e.q+n.f3*e.r)*o.y;return i(a+r.x,s+r.y)}function q(t,e){var n=t.orientation,r=t.size,a=t.origin,s=i((e.x-a.x)/r.x,(e.y-a.y)/r.y),c=n.b0*s.x+n.b1*s.y,u=n.b2*s.x+n.b3*s.y;return o(c,u,-c-u)}function M(t,e){var n=t.orientation,o=t.size,r=2*Math.PI*(n.start_angle-e)/6;return i(o.x*Math.cos(r),o.y*Math.sin(r))}function k(t){console.log("FAIL",t)}function F(t,e,n){e.q===n.q&&e.s===n.s&&e.r===n.r||k(t)}function Y(t,e,n){e.col===n.col&&e.row===n.row||k(t)}function j(t,e,n){e.col===n.col&&e.row===n.row||k(t)}function B(t,e,n){e!==n&&k(t)}function L(){console.log(function(t,e,n){B(t,e.length,n.length);for(var i=0;i<e.length;i++)F(t,e[i],n[i])}("hex_linedraw",[o(0,0,0),o(0,-1,1),o(0,-2,2),o(1,-3,2),o(1,-4,3),o(1,-5,4)],v(o(0,0,0),o(1,-5,4))))}F("hex_add",o(4,-10,6),r(o(1,-3,2),o(3,-7,4))),F("hex_subtract",o(-2,4,-2),a(o(1,-3,2),o(3,-7,4))),F("hex_direction",o(0,-1,1),l(2)),F("hex_neighbor",o(1,-3,2),p(o(1,-2,1),2)),F("hex_diagonal",o(-1,-1,2),d(o(1,-2,1),3)),B("hex_distance",7,f(o(3,-7,4),o(0,0,0))),F("hex_rotate_right",c(o(1,-3,2)),o(3,-2,-1)),F("hex_rotate_left",s(o(1,-3,2)),o(-2,-1,3)),function(){var t=o(0,0,0),e=o(1,-1,0),n=o(0,-1,1);F("hex_round 1",o(5,-10,5),g(y(o(0,0,0),o(10,-20,10),.5))),F("hex_round 2",g(t),g(y(t,e,.499))),F("hex_round 3",g(e),g(y(t,e,.501))),F("hex_round 4",g(t),g(o(.4*t.q+.3*e.q+.3*n.q,.4*t.r+.3*e.r+.3*n.r,.4*t.s+.3*e.s+.3*n.s))),F("hex_round 5",g(n),g(o(.3*t.q+.3*e.q+.4*n.q,.3*t.r+.3*e.r+.4*n.r,.3*t.s+.3*e.s+.4*n.s)))}(),L(),function(){var t=o(3,4,-7),e=R(N,i(10,15),i(35,71));F("layout",t,g(q(e,H(e,t))));var n=R(I,i(10,15),i(35,71));F("layout",t,g(q(n,H(n,t))))}(),function(){var t=o(3,4,-7),e=x(1,-3);F("conversion_roundtrip even-q",t,_(b,P(b,t))),Y("conversion_roundtrip even-q",e,P(b,_(b,e))),F("conversion_roundtrip odd-q",t,_(w,P(w,t))),Y("conversion_roundtrip odd-q",e,P(w,_(w,e))),F("conversion_roundtrip even-r",t,O(b,C(b,t))),Y("conversion_roundtrip even-r",e,C(b,O(b,e))),F("conversion_roundtrip odd-r",t,O(w,C(w,t))),Y("conversion_roundtrip odd-r",e,C(w,O(w,e)))}(),Y("offset_from_cube even-q",x(1,3),P(b,o(1,2,-3))),Y("offset_from_cube odd-q",x(1,2),P(w,o(1,2,-3))),F("offset_to_cube even-",o(1,2,-3),_(b,x(1,3))),F("offset_to_cube odd-q",o(1,2,-3),_(w,x(1,2))),function(){var t=o(3,4,-7),e=E(1,-3);F("conversion_roundtrip doubled-q",t,X(A(t))),j("conversion_roundtrip doubled-q",e,A(X(e))),F("conversion_roundtrip doubled-r",t,T(S(t))),j("conversion_roundtrip doubled-r",e,S(T(e)))}(),j("doubled_from_cube doubled-q",E(1,5),A(o(1,2,-3))),j("doubled_from_cube doubled-r",E(4,2),S(o(1,2,-3))),F("doubled_to_cube doubled-q",o(1,2,-3),X(E(1,5))),F("doubled_to_cube doubled-r",o(1,2,-3),T(E(4,2))),e.Point=i,e.Hex=o,e.hex_add=r,e.hex_subtract=a,e.hex_scale=function(t,e){return o(t.q*e,t.r*e,t.s*e)},e.hex_rotate_left=s,e.hex_rotate_right=c,e.hex_directions=u,e.hex_direction=l,e.hex_neighbor=p,e.hex_diagonals=h,e.hex_diagonal_neighbor=d,e.hex_length=m,e.hex_distance=f,e.hex_round=g,e.hex_lerp=y,e.hex_linedraw=v,e.OffsetCoord=x,e.EVEN=b,e.ODD=w,e.qoffset_from_cube=P,e.qoffset_to_cube=_,e.roffset_from_cube=C,e.roffset_to_cube=O,e.DoubledCoord=E,e.qdoubled_from_cube=A,e.qdoubled_to_cube=X,e.rdoubled_from_cube=S,e.rdoubled_to_cube=T,e.Orientation=D,e.Layout=R,e.layout_pointy=I,e.layout_flat=N,e.hex_to_pixel=H,e.pixel_to_hex=q,e.hex_corner_offset=M,e.polygon_corners=function(t,e){for(var n=[],o=H(t,e),r=0;r<6;r++){var a=M(t,r);n.push(i(o.x+a.x,o.y+a.y))}return n}},function(t,e,n){"use strict";t.exports.weaponsJSON={melee:{melee:!0,range:1,damage:[7,12],actionPoints:3},gun:{melee:!1,range:5,damage:[2,6],actionPoints:4},rifle:{melee:!1,range:8,damage:[7,12],actionPoints:4},knife:{melee:!0,range:null,damage:[4,6],actionPoints:2}}},function(t,e,n){"use strict";t.exports.animations=function(t){return{player:{gunFireBasic:{sprite:"assets/src/img/char_gun_firing.png",totalFrames:5,countX:5,countY:6,width:64,height:79,clipX:64,clipY:79,offsetX:10,offsetY:58,init:function(){t.paint.img.playerAttacking.src=t.animations.player.gunFireBasic.sprite}},stillBasic:{sprite:"assets/src/img/char_36_419.gif",countX:8,countY:6,width:36,height:70,clipX:0,clipY:70,offsetX:0,offsetY:50,init:function(){t.paint.img.playerStill.src=t.animations.player.stillBasic.sprite}},movingBasic:{sprite:"assets/src/img/complete_movement.gif",totalFrames:8,countX:8,countY:6,width:44,height:68,clipX:44,clipY:68,offsetX:0,offsetY:50,init:function(){t.paint.img.playerMoving.src=t.animations.player.movingBasic.sprite}}},enemy:{scorpionStill:{sprite:"assets/src/img/enemy_scorpion_still.png",countX:1,countY:6,width:59,height:49,clipX:59,clipY:49,offsetX:0,offsetY:50,init:function(){t.paint.img.scorpionStill.src=t.animations.enemy.scorpionStill.sprite}},scorpionAttack:{sprite:"assets/src/img/enemy_scorpion_attack.png",totalFrames:11,countX:11,countY:6,width:86,height:68,clipX:86,clipY:68,offsetX:10,offsetY:40,init:function(){t.paint.img.scorpionAttacking.src=t.animations.enemy.scorpionAttack.sprite}},scorpionMoving:{sprite:"assets/src/img/enemy_scorpion_moving.png",totalFrames:8,countX:8,countY:6,width:59,height:48,clipX:59,clipY:48,offsetX:0,offsetY:20,init:function(){t.paint.img.scorpionMoving.src=t.animations.enemy.scorpionMoving.sprite}},scorpionHit:{sprite:"assets/src/img/enemy_scorpion_hit.png",totalFrames:6,countX:6,countY:6,width:59,height:48,clipX:59,clipY:48,offsetX:0,offsetY:20,init:function(){t.paint.img.scorpionHit.src=t.animations.enemy.scorpionHit.sprite}},scorpionDeath:{sprite:"assets/src/img/enemy_scorpion_death.png",totalFrames:5,countX:5,countY:6,width:53.8,height:34.83,clipX:53.8,clipY:34.83,offsetX:0,offsetY:10,init:function(){t.paint.img.scorpionDeath.src=t.animations.enemy.scorpionDeath.sprite}},scorpionDead:{sprite:"assets/src/img/enemy_scorpion_dead.png",countX:1,countY:6,width:53.8,height:34.83,clipX:0,clipY:34.83,offsetX:0,offsetY:10,init:function(){t.paint.img.scorpionDead.src=t.animations.enemy.scorpionDead.sprite}}}}}},function(t,e,n){"use strict";t.exports.getCords=function(t){return{_small:function(e,n){var i=t.hexagon.grid.getSelectedTile(e-t.hexagon.grid.canvasOriginX+t.CONSTANTS.area.x,n-t.hexagon.grid.canvasOriginY+t.CONSTANTS.area.y);return{x:i.column,y:i.row}},small:function(e,n){var i=t.cords.getCords._small(e,n);return{CORD:{x:i.x,y:i.y}}},final:function(e,n){var i=t.hexagon.grid.getPXAtColRow(e,n);return{PX:{x:i.x,y:i.y},CORD:{x:i.x,y:i.y}}}}}},function(t,e,n){"use strict";t.exports.getNextCord=function(t,e,n,i,o){var r,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=1,c=void 0,u=void 0,l=[],p=void 0,h=t.CONSTANTS.cordPrioritiesList;-0===e&&(e=0),-0===n&&(n=0),c=r=h.indexOf(i+o),u=r,l.push(i+o);do{s++,u--,0,0,++c>h.length-1&&(c=0),-1===u&&(u=h.length-1),l.push(h[c]),l.push(h[u])}while(s<=4);l.splice(-1,1);for(var d=0;d<l.length;d++){var m={x:e,y:n,restricted:null};if("/-"===l[d]?m.y=n-1:"/+"===l[d]&&(m.y=n+1),e%2==1?"+-"===l[d]?m.x=e+1:"++"===l[d]?(m.x=e+1,m.y=n+1):"-+"===l[d]?(m.x=e-1,m.y=n+1):"--"===l[d]&&(m.x=e-1):"+-"===l[d]?(m.x=e+1,m.y=n-1):"++"===l[d]?m.x=e+1:"-+"===l[d]?m.x=e-1:"--"===l[d]&&(m.x=e-1,m.y=n-1),a&&(p=!t.restricted.isCordRestricted(t,m.x,m.y)),!p)return{newCords:m,restricted:p}}console.log("NO CORDS?")}},function(t,e,n){"use strict";t.exports.typeOfCord=function(t,e){var n=!1,i=!0,o=!1,r=0;return t.enemies.list.map(function(t){t.HEX.CORD.x===e.x&&t.HEX.CORD.y===e.y&&(t.alive?(r=2,o=!0,n=!0):(r=3,o=!1,n=!1))}),((n=!t.restricted.isCordRestricted(t,e.x,e.y))||o)&&(i=!1),n&&!o&&(r=1),{type:r,canMoveTo:i,enemy:o}}},function(t,e,n){"use strict";t.exports.getEnemyByCords=function(t,e){var n=void 0,i=t.enemies.list.find(function(t,i){if(console.log(t),t.HEX.CORD.x===e.x&&t.HEX.CORD.y===e.y)return n=i,{HEX:{CORD:{x:e.x,y:e.y}}}});if(void 0!==i)return Object.assign(i,{idx:n})}},function(t,e,n){"use strict";t.exports.getRandomNumberInRange=function(t,e,n){return Math.floor(Math.random()*(n-e+1))+e}},function(t,e,n){"use strict";t.exports.generateUniqueID=function(t){return"_"+Math.random().toString(36).substr(2,9)}},function(t,e,n){"use strict";t.exports.calculatePathDirection=function(t,e,n){var i="",o="";return e.x%2==1?n.x>e.x&&n.y===e.y?(i="+",o="-"):n.x>e.x&&n.y>e.y?(i="+",o="+"):n.x===e.x&&n.y>e.y?(i="/",o="+"):n.x<e.x&&n.y>e.y?(i="-",o="+"):n.x<e.x&&n.y===e.y?(i="-",o="-"):n.x===e.x&&n.y<e.y?(i="/",o="-"):n.x>e.x&&n.y<e.y?(i="+",o="-"):n.x<e.x&&n.y>e.y?(i="-",o="+"):n.x<e.x&&n.y<e.y&&(i="-",o="-"):n.x>e.x&&n.y<e.y?(i="+",o="-"):n.x>e.x&&n.y===e.y?(i="+",o="+"):n.x===e.x&&n.y>e.y?(i="/",o="+"):n.x<e.x&&n.y===e.y?(i="-",o="+"):n.x<e.x&&n.y<e.y?(i="-",o="-"):n.x===e.x&&n.y<e.y?(i="/",o="-"):n.x>e.x&&n.y>e.y?(i="+",o="+"):n.x<e.x&&n.y>e.y&&(i="-",o="+"),{directionX:i,directionY:o}}},function(t,e,n){"use strict";t.exports.getStraightPathBetweenCords=function(t,e,n){var i=void 0,o=void 0,r=e,a=void 0,s=!0,c=0;for(i=0;i<t.CONSTANTS.longestPath&&(a=t.paths.calculatePathDirection(t,r,n),c++,(o=t.cords.getNextCord(t,r.x,r.y,a.directionX,a.directionY,!0)).restricted&&(s=!1),r=o.newCords,o.newCords.x!=n.x||o.newCords.y!=n.y);i++);return{pathLength:c,isPathPossible:s}}},function(t,e,n){"use strict";t.exports.isCordRestricted=function(t,e,n){var i=t.restricted.cords;return t.restricted.dynamic&&(i=t.restricted.dynamicCords),!(e>t.CONSTANTS.positionsXsmallTotal||e<0)&&(!(n>t.CONSTANTS.positionsYsmallTotal||n<0)&&!i.find(function(t){return t.x===e&&t.y===n}))}},function(t,e,n){"use strict";t.exports.isCordSameAsNow=function(t,e,n){return e.x==n.x&&e.y==n.y}},function(t,e,n){"use strict";t.exports.combatStatus=function(t){t.canvas.font="13px monospace",t.canvas.fillStyle="#fff",t.canvas.fillText("In combat: "+t.combat.inCombat,20,400),t.canvas.fillText("actionPoints: "+t.player.actionPoints+"/"+t.player.DEFAULTS.actionPoints,20,415)}},function(t,e,n){"use strict";t.exports.imagesCollection=function(t){return{playerAttacking:new Image,playerStill:new Image,playerMoving:new Image,scorpionAttacking:new Image,scorpionStill:new Image,scorpionMoving:new Image,scorpionHit:new Image,scorpionDeath:new Image,scorpionDead:new Image,bar:new Image,barInit:function(){t.paint.img.bar.src="assets/src/img/bar.png"},cursorCurrent:new Image,cursorCurrentIdx:-1,cursorCurrentInit:function(){t.paint.img.cursorCurrent.src=""},cursorTouch:new Image,cursorTouchInit:function(){t.paint.img.cursorTouch.src="assets/src/img/cursor_touch.png"},cursorStandard:new Image,cursorStandardInit:function(){t.paint.img.cursorStandard.src="assets/src/img/cursor_standard.png"},cursorRestricted:new Image,cursorRestrictedInit:function(){t.paint.img.cursorRestricted.src="assets/src/img/cursor_restricted.png"},cursorEnemy:new Image,cursorEnemyInit:function(){t.paint.img.cursorEnemy.src="assets/src/img/cursor_enemy.png"},bgDesert:new Image,bgDesertInit:function(){t.paint.img.bgDesert.src="assets/src/img/bg_desert.gif"}}}},function(t,e,n){"use strict";t.exports.bar=function(t){t.canvasBar.drawImage(t.paint.img.bar,0,0,1100,100,0,0,1100,100)}},function(t,e,n){"use strict";n(2);t.exports.grid=function(t){}},function(t,e,n){"use strict";t.exports.mouseCursor=function(t){t.canvas.drawImage(t.paint.img.cursorCurrent,0,0,28,23,t.positions.mousePointer.HEX.PX.x,t.positions.mousePointer.HEX.PX.y,28,23)}},function(t,e,n){"use strict";t.exports.restrictedAreas=function(t){t.restricted.cords.map(function(e){t.hexagon.grid.drawHexAtColRow(e.x,e.y,t.restricted.dynamic?"pink":"red")})}},function(t,e,n){"use strict";t.exports.background=function(t){t.canvas.drawImage(t.paint.img.bgDesert,0,0,960,440,0,0,960,440)}},function(t,e,n){"use strict";t.exports.mousePointerHover=function(t){t.hexagon.grid.drawHexAtColRow(t.positions.mousePointer.HEX.CORD.x,t.positions.mousePointer.HEX.CORD.y,"rgba(255,0,255,0.2)")}},function(t,e,n){"use strict";t.exports.playerBox=function(t,e){t.hexagon.grid.drawHexAtColRow(t.positions.playerPos.HEX.CORD.x,t.positions.playerPos.HEX.CORD.y,"blue"),t.canvas.fillStyle="#ffddff",t.canvas.font="14px monospace",t.canvas.fillText(t.player.health,project.canvas.positions.playerPos.HEX.PX.x-20,project.canvas.positions.playerPos.HEX.PX.y)}},function(t,e,n){"use strict";t.exports.playerStillFacing=function(t,e){if(0===t.player.state){var n=t.player.animations,i=t.CONSTANTS.cordPrioritiesList.indexOf(t.positions.playerPos.FACING.x+t.positions.playerPos.FACING.y);t.canvas.drawImage(t.paint.img.playerStill,n.still.clipX,i*n.still.height,n.still.width,n.still.height,t.positions.playerPos.HEX.PX.x-n.still.offsetX,t.positions.playerPos.HEX.PX.y-n.still.offsetY,n.still.width,n.still.height)}}},function(t,e,n){"use strict";t.exports.playerMoving=function(t,e){if(1===t.player.state){var n=t.player.animations;Date.now()-t.player.animation.startTime>70&&(t.player.animation.startTime=Date.now(),t.positions.playerPos.moveCounter++,t.positions.playerPos.moveCounter===n.moving.totalFrames&&(t.positions.playerPos.moveCounter=0));var i=t.CONSTANTS.cordPrioritiesList.indexOf(t.positions.playerPos.FACING.x+t.positions.playerPos.FACING.y);-1===i?(i=t.positions.playerPos.previousImgStep,console.log("NOT FOUND!",t.positions.playerPos.FACING.x+t.positions.playerPos.FACING.y)):t.positions.playerPos.previousImgStep=i,t.canvas.drawImage(t.paint.img.playerMoving,n.moving.clipX*t.positions.playerPos.moveCounter,i*n.moving.clipY,n.moving.width,n.moving.height,t.positions.playerPos.HEX.PX.x-n.moving.offsetX,t.positions.playerPos.HEX.PX.y-n.moving.offsetY,n.moving.width,n.moving.height)}}},function(t,e,n){"use strict";t.exports.playerAttacking=function(t,e){if(2===t.player.state){var n=t.player.animations;Date.now()-t.player.animation.startTime>100&&(t.player.animation.startTime=Date.now(),t.player.temp.haveBeenRun||t.player.temp.attackStep++,t.player.temp.attackStep>=n.attack.totalFrames&&(t.player.temp.haveBeenRun=!0,t.player.temp.attackStep=0));var i=t.CONSTANTS.cordPrioritiesList.indexOf(t.positions.playerPos.FACING.x+t.positions.playerPos.FACING.y);t.canvas.drawImage(t.paint.img.playerAttacking,n.attack.clipX*t.player.temp.attackStep,i*n.attack.clipY,n.attack.width,n.attack.height,t.positions.playerPos.HEX.PX.x-n.attack.offsetX,t.positions.playerPos.HEX.PX.y-n.attack.offsetY,n.attack.width,n.attack.height)}}},function(t,e,n){"use strict";t.exports.enemyBox=function(t,e,n){t.hexagon.grid.drawHexAtColRow(t.enemies.list[e].HEX.CORD.x,t.enemies.list[e].HEX.CORD.y,"yellow");var i=t.hexagon.grid.getPXAtColRow(t.enemies.list[e].HEX.CORD.x,t.enemies.list[e].HEX.CORD.y);t.canvas.font="14px monospace",t.canvas.fillText(t.enemies.list[e].health,i.x-20,i.y)}},function(t,e,n){"use strict";t.exports.enemyStillFacing=function(t,e){for(var n=void 0,i=void 0,o=0;o<t.enemies.list.length;o++)if(0===(n=t.enemies.list[o]).state){i=t.CONSTANTS.cordPrioritiesList.indexOf(n.FACING.x+n.FACING.y);var r=t.hexagon.grid.getPXAtColRow(n.HEX.CORD.x,n.HEX.CORD.y);n.alive?t.canvas.drawImage(t.paint.img.scorpionStill,0,49*i,59,49,r.x-5,r.y-15,59,49):t.canvas.drawImage(t.paint.img.scorpionDead,n.animations.dead.clipX,i*n.animations.dead.clipY,n.animations.dead.width,n.animations.dead.height,r.x-n.animations.dead.offsetX,r.y-n.animations.dead.offsetY,n.animations.dead.width,n.animations.dead.height)}}},function(t,e,n){"use strict";t.exports.enemyMoving=function(t,e){t.enemies.list.map(function(e){if(1===e.state){var n=t.CONSTANTS.cordPrioritiesList.indexOf(e.FACING.x+e.FACING.y),i=t.hexagon.grid.getPXAtColRow(e.HEX.CORD.x,e.HEX.CORD.y),o=e.animations;Date.now()-e.animation.startTime>100&&(e.animation.startTime=Date.now(),e.temp.haveBeenRun||e.temp.tempStep++,e.temp.tempStep>=o.moving.totalFrames&&(e.temp.haveBeenRun=!0,e.temp.tempStep=0)),t.canvas.drawImage(t.paint.img.scorpionMoving,o.moving.clipX*e.temp.tempStep,n*o.moving.clipY,o.moving.width,o.moving.height,i.x-o.moving.offsetX,i.y-o.moving.offsetY,o.moving.width,o.moving.height)}})}},function(t,e,n){"use strict";t.exports.enemyAttacking=function(t,e){t.enemies.list.map(function(e){if(2===e.state){var n=t.CONSTANTS.cordPrioritiesList.indexOf(e.FACING.x+e.FACING.y),i=t.hexagon.grid.getPXAtColRow(e.HEX.CORD.x,e.HEX.CORD.y);console.log("attacking");var o=e.animations;Date.now()-e.animation.startTime>100&&(e.animation.startTime=Date.now(),e.temp.haveBeenRun||e.temp.tempStep++,e.temp.tempStep>=o.attack.totalFrames&&(e.temp.haveBeenRun=!0,e.temp.tempStep=0)),t.canvas.drawImage(t.paint.img.scorpionAttacking,o.attack.clipX*e.temp.tempStep,n*o.attack.clipY,o.attack.width,o.attack.height,i.x-o.attack.offsetX,i.y-o.attack.offsetY,o.attack.width,o.attack.height)}})}},function(t,e,n){"use strict";t.exports.enemyHit=function(t,e){t.enemies.list.map(function(e){if(3===e.state){var n=t.CONSTANTS.cordPrioritiesList.indexOf(e.FACING.x+e.FACING.y),i=t.hexagon.grid.getPXAtColRow(e.HEX.CORD.x,e.HEX.CORD.y),o=e.animations;Date.now()-e.animation.startTime>100&&(e.animation.startTime=Date.now(),e.temp.haveBeenRun||e.temp.tempStep++,e.temp.tempStep>=o.hit.totalFrames&&(e.temp.haveBeenRun=!0,e.temp.tempStep=0)),t.canvas.drawImage(t.paint.img.scorpionHit,o.hit.clipX*e.temp.tempStep,n*o.hit.clipY,o.hit.width,o.hit.height,i.x-o.hit.offsetX,i.y-o.hit.offsetY,o.hit.width,o.hit.height)}})}},function(t,e,n){"use strict";t.exports.enemyDeath=function(t,e){t.enemies.list.map(function(e){if(-1===e.state){var n=t.CONSTANTS.cordPrioritiesList.indexOf(e.FACING.x+e.FACING.y),i=t.hexagon.grid.getPXAtColRow(e.HEX.CORD.x,e.HEX.CORD.y),o=e.animations;Date.now()-e.animation.startTime>100&&(e.animation.startTime=Date.now(),e.temp.haveBeenRun||e.temp.tempStep++,e.temp.tempStep>=o.death.totalFrames&&(e.temp.haveBeenRun=!0,e.temp.tempStep=0)),t.canvas.drawImage(t.paint.img.scorpionDeath,o.death.clipX*e.temp.tempStep,n*o.death.clipY,o.death.width,o.death.height,i.x-o.death.offsetX,i.y-o.death.offsetY,o.death.width,o.death.height)}})}},function(t,e,n){"use strict";t.exports.clearScreen=function(t){t.canvas.clearRect(0,0,t.CONSTANTS.area.widthPX,t.CONSTANTS.area.heightPX)}},function(t,e,n){"use strict";t.exports.updateCanvas=function(t,e){t.paint.clearScreen(t),t.paint.background(t),t.paint.grid(t),t.paint.mousePointerHover(t),t.paint.restrictedAreas(t);for(var n=0;n<t.enemies.list.length;n++)t.paint.enemyBox(t,n,e);t.paint.playerBox(t,e),t.paint.playerStillFacing(t,e),t.paint.playerMoving(t,e),t.paint.playerAttacking(t,e),t.paint.enemyStillFacing(t,e),t.paint.enemyMoving(t,e),t.paint.enemyAttacking(t,e),t.paint.enemyHit(t,e),t.paint.enemyDeath(t,e),t.paint.mouseCursor(t),t.paint.bar(t),t.paint.combatStatus(t)}},function(t,e,n){"use strict";t.exports.areaViewportPosition=function(t){var e=t.elem.area.getBoundingClientRect();t.CONSTANTS.area.x=e.x,t.CONSTANTS.area.y=e.y}},function(t,e,n){"use strict";t.exports.mousePointerPosition=function(t,e,n){t.positions.mousePointer.HEX.PX.x=e,t.positions.mousePointer.HEX.PX.y=n;var i=t.cords.getCords.small(e,n),o=t.cords.typeOfCord(t,i.CORD);o.type!==t.paint.img.cursorCurrentIdx&&(t.paint.img.cursorCurrentIdx=o.type,0===o.type?t.paint.img.cursorCurrent.src=t.paint.img.cursorStandard.src:1===o.type?t.paint.img.cursorCurrent.src=t.paint.img.cursorRestricted.src:2===o.type?t.paint.img.cursorCurrent.src=t.paint.img.cursorEnemy.src:3===o.type&&(t.paint.img.cursorCurrent.src=t.paint.img.cursorTouch.src)),t.positions.mousePointer.HEX.CORD.x=i.CORD.x,t.positions.mousePointer.HEX.CORD.y=i.CORD.y}},function(t,e,n){"use strict";t.exports.clickPosition=function(t,e,n,i){var o=t.positions.clickPos,r=t.hexagon.grid,a=e.pageX,s=e.pageY,c=a-r.canvasOriginX,u=s-r.canvasOriginY;console.log(a,s,r.canvasOriginX,r.canvasOriginY);var l=r.getSelectedTile(c,u);if(l.column>=0&&l.row>=0){var p=l.column%2==0?l.row*r.height+r.canvasOriginY+6:l.row*r.height+r.canvasOriginY+6+r.height/2,h=l.column*r.side+r.canvasOriginX;o.HEX.PX.x=h,o.HEX.PX.y=p,o.HEX.CORD.x=l.column,o.HEX.CORD.y=l.row}}},function(t,e,n){"use strict";t.exports.playerBoxPosition=function(t,e,n){var i=t.hexagon.grid.getPXAtColRow(e,n);Object.assign(t.positions.playerPos,{HEX:{PX:{x:i.x,y:i.y},CORD:{x:e,y:n}}})}},function(t,e,n){"use strict";t.exports.playerFacing=function(t,e){Object.assign(t.positions.playerPos.FACING,{x:e.directionX,y:e.directionY})}},function(t,e,n){"use strict";t.exports.enemyBoxPosition=function(t,e,n,i){var o=t.hexagon.grid.getPXAtColRow(n,i);Object.assign(e,{HEX:{PX:{x:o.x,y:o.y},CORD:{x:n,y:i}}})}},function(t,e,n){"use strict";t.exports.enemyFacing=function(t,e,n){Object.assign(t.enemies.list[e].FACING,{x:n.directionX,y:n.directionY})}},function(t,e,n){"use strict";t.exports.fixCanvasSize=function(){[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(document.querySelectorAll("canvas"))).map(function(t){t.width=t.offsetWidth,t.height=t.offsetHeight})}},function(t,e,n){"use strict";t.exports.createRandomRestrictedArea=function(t){var e=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t};t.restricted.cords.length=0;for(var n=0;n<100;n++)t.restricted.cords.push({x:e(0,t.CONSTANTS.positionsXsmallTotal),y:e(0,t.CONSTANTS.positionsYsmallTotal)})}}]);